<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Instruction Set &mdash; Mill 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Mill 0.0.1 documentation" href="../index.html" />
    <link rel="up" title="Virtual Machine" href="../vm.html" />
    <link rel="prev" title="Types" href="types.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="types.html" title="Types"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Mill 0.0.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../vm.html" accesskey="U">Virtual Machine</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Instruction Set</a><ul>
<li><a class="reference internal" href="#instructions">Instructions</a><ul>
<li><a class="reference internal" href="#brk">brk</a><ul>
<li><a class="reference internal" href="#encoding">Encoding</a></li>
<li><a class="reference internal" href="#evaluation-stack">Evaluation Stack</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
</ul>
</li>
<li><a class="reference internal" href="#call">call</a><ul>
<li><a class="reference internal" href="#id1">Encoding</a></li>
<li><a class="reference internal" href="#id2">Evaluation Stack</a></li>
<li><a class="reference internal" href="#id3">Description</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="types.html"
                        title="previous chapter">Types</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/vm/instruction-set.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="instruction-set">
<h1>Instruction Set<a class="headerlink" href="#instruction-set" title="Permalink to this headline">¶</a></h1>
<p>Mill instructions operate on Mill values, local variables and a per-thread
evaluation stack.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">There is currently no bytecode verification step. Any attempt to execute an
invalid instruction (including ill-typed combinations of instructions)
results in undefined behavior.</p>
</div>
<div class="section" id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="brk">
<h3>brk<a class="headerlink" href="#brk" title="Permalink to this headline">¶</a></h3>
<div class="section" id="encoding">
<h4>Encoding<a class="headerlink" href="#encoding" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span> <span class="n">opcode</span><span class="p">:</span> <span class="n">brk</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="evaluation-stack">
<h4>Evaluation Stack<a class="headerlink" href="#evaluation-stack" title="Permalink to this headline">¶</a></h4>
<p>… → …</p>
</div>
<div class="section" id="description">
<h4>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">brk</span></code> instruction advances the program counter, pauses execution of the
performing thread, and notifies the debugger. If the VM is not attached to a
debugger, it is terminated.</p>
</div>
</div>
<div class="section" id="call">
<h3>call<a class="headerlink" href="#call" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>Encoding<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre>{ opcode: call, arguments: *arguments }
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h4>Evaluation Stack<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>…, [argument 1, [argument 2 …]] → …</p>
</div>
<div class="section" id="id3">
<h4>Description<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">call</span></code> instruction advances the program counter, pops <code class="docutils literal"><span class="pre">*arguments</span></code>
arguments off the stack, pops the callee off the stack, pushes a new stack
frame onto the top of the call stack with the start of the body of the callee
as the program counter and the arguments popped off the stack as arguments.
The argument last popped off the stack is the first argument passed to the
callee.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="types.html" title="Types"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Mill 0.0.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../vm.html" >Virtual Machine</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Mill contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>